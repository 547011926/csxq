define([],function(){function Check(){this.result=function(data,callback,failedcallback){if(!data)return;data.code==undefined&&(data=eval("("+data+")"));if(data.code==0)return callback(data);if(data.code!=101&&data.code!=102&&data.code!=103){var msg=data.message&&data.message.length?data.message:"发生未知错误！";return alert(msg),failedcallback&&failedcallback(data),!1}}}function GetUrlRequest(){var e=location.search,t=new Object;if(e.indexOf("?")==-1)return null;var n=e.substr(1);strs=n.split("&");for(var r=0;r<strs.length;r++)t[strs[r].split("=")[0]]=strs[r].split("=")[1];return t}function createClose(e,t,n){var r=document.createElement("div"),i=document.getElementById("body"),s=document.createElement("div");r.className="mask",r.innerHTML=e,r.style.width=t,r.style.height=n,r.style.top=document.body.scrollTop+"px",s.className="close",s.innerHTML="x",r.appendChild(s),i.appendChild(r),$(".close").on("touchstart",function(){this.parentNode.style.display="none"})}function goBack(e){navigator.userAgent.indexOf("MSIE")>=0&&navigator.userAgent.indexOf("Opera")<0?history.length>0?window.history.go(-1):window.location=e:navigator.userAgent.indexOf("Firefox")>=0||navigator.userAgent.indexOf("Opera")>=0||navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Chrome")>=0||navigator.userAgent.indexOf("WebKit")>=0?window.history.length>1?window.history.go(-1):window.location=e:window.history.go(-1)}var ClientType="",identifyingStr=navigator.userAgent.toLowerCase();identifyingStr.indexOf("iphone")!=-1?ClientType="iphone":identifyingStr.indexOf("android")!=-1?ClientType="Android":identifyingStr.indexOf("windows")!=-1&&identifyingStr.indexOf("phone")!=-1?ClientType="windowsphone":ClientType="";var getJSONPCache=function(e,t,n){t=$.extend({ISJSONP:"true",os:ClientType},t),e+="?callback=?",$.ajaxJSONP({url:e,data:t,success:n,error:function(e,t){}})},getJSONCache=function(e,t,n){$.ajax({url:e,dataType:"json",type:"get",data:t,success:n})};return String.prototype.format=function(e){var t=this;if(arguments.length>0)if(arguments.length==1&&typeof e=="object"){for(var n in e)if(e[n]!=undefined){var r=new RegExp("({"+n+"})","g");t=t.replace(r,e[n])}}else for(var i=0;i<arguments.length;i++)if(arguments[i]!=undefined){var r=new RegExp("({)"+i+"(})","g");t=t.replace(r,arguments[i])}return t},String.prototype.convert=function(e,t){return e==null||e==undefined||e=="1901-01-01"||e=="0001-01-01"?t==undefined?"":t:e},{getJSONPCache:function(e,t,n){getJSONPCache(e,t,n)},getJSONCache:function(e,t,n){getJSONCache(e,t,n)},result:function(e,t,n){(new Check).result(e,t,n)},getUrlRequest:function(){return GetUrlRequest()},createClose:function(e,t,n){createClose(e,t,n)},goBack:goBack}});