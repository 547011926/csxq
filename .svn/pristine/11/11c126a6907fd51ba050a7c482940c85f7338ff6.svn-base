require.config({
	paths: {
		"global": "../../global",
		"core": "../common.core"
	},
	shim: {

	}
});
define(["global", "core"], function(g, core) {

	var check = {
		checkTel: function(textTel) {
			var reg = /^1\{d10}$/;
			textTel.onfocus = function() {
				this.value = "";
			}
			textTel.onblur = function() {
				var val = textTel.value,
					b = reg.test(val);
				if (!b) {
					this.placeholder = "请输入正确的手机号码";
					this.style.backgroundColor = "yellow";
					return false;
				}
				return true;
			}
		},
		btnSubmit: function(textTel) {
			var btnSubmit = document.getElementById("btnSubmit");
			btnSubmit.onclick = function() {
				if (textTel.value == null || textTel.value == undefined || textTel.value == '') {
                    textTel.placeholder="请输入手机号码";
                    textTel.style.backgroundColor="yellow";
					return;
				}
				var xm = '';
				var url = g.urlHttp+'JXBMX/AddyyBmxx';
				core.getJSONPCache(url,{type:1,handset:textTel,xm:xm},function(data){
					core.result(data, function(data) {
						if(data.code == '0'){
							alertInfo('恭喜你，报名成功');
							document.getElementById("textTel").value = '';
						}
					})
				})

			};
		},
        goodList: function (main) {
            var url=g.urlHttp+"JXPM/GetMSYXB";
            core.getJSONPCache(url,{},function(data){
                core.result(data, function(data) {
                    var dataBase=data.data.Result;
                    for(var i=0;i<dataBase.length;i++){
                        var str='<div class="jiaxiao"><em></em><strong>优选榜</strong><span>dataBase[i].JXNAME</span></div>';
                    }
                    main.appendChild(str);
                })
            })
        },
		init: function() {
			var textTel = document.getElementById("textTel"),
                main=document.getElementsByClassName("main")[0];
			this.checkTel(textTel);
            this.btnSubmit(textTel);
            this.goodList(main);
		}
	}
	check.init();
});